<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rika Toaster Review Helper</title>
    <style>
        body { font-family: sans-serif; line-height: 1.6; max-width: 800px; margin: 20px auto; padding: 20px; background: #f4f7f6; }
        .card { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .tab-content { display: none; }
        .active { display: block; }
        textarea { width: 100%; height: 100px; margin: 15px 0; padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; }
        .btn-group { display: flex; gap: 10px; margin-bottom: 20px; }
        button { padding: 10px 20px; cursor: pointer; border: none; border-radius: 5px; transition: 0.3s; }
        .btn-listen { background: #3498db; color: white; }
        .btn-record { background: #e67e22; color: white; }
        .btn-next { background: #2ecc71; color: white; float: right; }
        .hint { font-size: 0.9em; color: #666; font-style: italic; }
        nav { margin-bottom: 20px; }
        nav button { background: #ddd; margin-right: 5px; }
        nav button.active-nav { background: #2c3e50; color: white; }
    </style>
</head>
<body>

<div class="card">
    <h2>ğŸ Rika Toaster Review Helper</h2>
    <nav id="nav-tabs"></nav>

    <div id="steps-container">
        <div class="tab-content active" id="step0">
            <h3>Step 1: Opening</h3>
            <p class="hint">Hi, all! Welcome back to my channel! This is [Name] again. Today, Iâ€™m going to review the new Rika Toaster.</p>
            <textarea id="text0" placeholder="Type your opening here..."></textarea>
            <div class="btn-group">
                <button class="btn-listen" onclick="speak('text0')">ğŸ”Š Listen</button>
                <button class="btn-record" onclick="record('text0')">ğŸ¤ Practice</button>
            </div>
        </div>

        <div class="tab-content" id="step1">
            <h3>Step 2: Product Features</h3>
            <p class="hint">Key words: stainless steel, independent slots, crumb tray...</p>
            <textarea id="text1" placeholder="It is / It has / It can..."></textarea>
            <div class="btn-group">
                <button class="btn-listen" onclick="speak('text1')">ğŸ”Š Listen</button>
                <button class="btn-record" onclick="record('text1')">ğŸ¤ Practice</button>
            </div>
        </div>

        </div>
    
    <button class="btn-next" onclick="nextStep()">Next Step â†’</button>
</div>

<script>
    let currentStep = 0;
    const totalSteps = 5; // å°æ‡‰ä½  template çš„ 5 å€‹ section
    const stepNames = ["Opening", "Features", "Instruction", "Review", "Closing"];

    // åˆå§‹åŒ– Navigation
    const nav = document.getElementById('nav-tabs');
    stepNames.forEach((name, i) => {
        const btn = document.createElement('button');
        btn.innerText = name;
        btn.id = `nav${i}`;
        if(i===0) btn.className = 'active-nav';
        nav.appendChild(btn);
    });

    function nextStep() {
        if (currentStep < stepNames.length - 1) {
            document.getElementById(`step${currentStep}`).classList.remove('active');
            document.getElementById(`nav${currentStep}`).classList.remove('active-nav');
            currentStep++;
            // é€™è£¡å‹•æ…‹ç”Ÿæˆæ–° Step çš„å…§å®¹ (ç‚ºäº†ç°¡åŒ–ä»£ç¢¼ï¼Œå¯¦éš›æ‡‰ç”¨å¯é å…ˆå¯«å¥½æ‰€æœ‰ div)
            showStep(currentStep);
        } else {
            alert("Congratulations! You've finished your script!");
        }
    }

    function showStep(step) {
        // éš±è—æ‰€æœ‰
        document.querySelectorAll('.tab-content').forEach(el => el.style.display = 'none');
        // é¡¯ç¤ºç•¶å‰ (å¯¦éš›æ‡‰ç”¨éœ€ç¢ºä¿ HTML å…§æœ‰å°æ‡‰ ID)
        let target = document.getElementById(`step${step}`);
        if(!target) {
            // å¦‚æœæœªé å¯«ï¼Œé€™è£¡å¯å‹•æ…‹ç”Ÿæˆæˆ–é¡¯ç¤ºéš±è—å¥½çš„ div
            alert("Please complete the previous steps!");
        } else {
            target.style.display = 'block';
            document.getElementById(`nav${step}`).className = 'active-nav';
        }
    }

    function speak(id) {
        const text = document.getElementById(id).value;
        if(!text) return alert("Please write something first!");
        const msg = new SpeechSynthesisUtterance(text);
        msg.lang = 'en-US';
        window.speechSynthesis.speak(msg);
    }

    function record(id) {
        const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        recognition.lang = 'en-US';
        recognition.start();

        recognition.onresult = function(event) {
            const result = event.results[0][0].transcript;
            const original = document.getElementById(id).value;
            
            // å½ˆå‡º Feedback Window
            const feedback = result.toLowerCase() === original.toLowerCase().trim() 
                ? "âœ… Excellent! Match 100%" 
                : "âš ï¸ Keep trying!\nYou said: " + result;
            alert(feedback);
        };
    }
</script>
</body>
</html>
